<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="ClearComs.Views.FlashcardsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:ClearComs.ViewModels"
    Title="Flashcards">

    <ContentPage.BindingContext>
        <vm:FlashcardsViewModel />
    </ContentPage.BindingContext>

    <Grid Padding="16" RowDefinitions="*,Auto" ColumnDefinitions="*">
        <!-- Card area -->
        <Border
            x:Name="CardFrame"
            Grid.Row="0"
            Margin="12"
            BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}"
            HorizontalOptions="Fill"
            VerticalOptions="Center">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="12" />
            </Border.StrokeShape>
            <Grid x:Name="CardContainer" HeightRequest="300" WidthRequest="400">
                <!-- Front -->
                <Grid x:Name="FrontView" IsVisible="True" BackgroundColor="Transparent">
                    <Label
                        Text="{Binding CurrentCard.Front}"
                        LineBreakMode="WordWrap"
                        HorizontalTextAlignment="Center"
                        VerticalTextAlignment="Center"
                        FontSize="24"
                        Margin="18"
                        TextColor="{AppThemeBinding Light={StaticResource DarkOnLightBackground}, Dark={StaticResource LightOnDarkBackground}}" />
                </Grid>

                <!-- Back -->
                <Grid x:Name="BackView" IsVisible="False" BackgroundColor="Transparent">
                    <Label
                        Text="{Binding CurrentCard.Back}"
                        LineBreakMode="WordWrap"
                        HorizontalTextAlignment="Center"
                        VerticalTextAlignment="Center"
                        FontSize="20"
                        Margin="18"
                        TextColor="{AppThemeBinding Light={StaticResource DarkOnLightBackground}, Dark={StaticResource LightOnDarkBackground}}" />
                </Grid>
            </Grid>

            <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnCardTapped" NumberOfTapsRequired="1" />
            </Border.GestureRecognizers>
        </Border>

        <!-- Controls -->
        <StackLayout
            Grid.Row="1"
            Orientation="Horizontal"
            HorizontalOptions="Center"
            Spacing="12"
            Padding="6">
            <Button Text="Prev" Command="{Binding PrevCommand}" />
            <Label Text="{Binding CounterText}" VerticalOptions="Center" HorizontalOptions="Center" />
            <Button Text="Next" Command="{Binding NextCommand}" />
            <Button Text="Shuffle" Command="{Binding ShuffleCommand}" />
        </StackLayout>
    </Grid>
</ContentPage>
